ready = ->
  pathname = window.location.pathname;
  if(pathname == "/")
    $('ul.nav.navbar-nav li.index-nav,ul.list-group li.index-nav').addClass('active')
  if(pathname == "/apply-writer")  
    $('ul.nav.navbar-nav li.apply-nav,ul.list-group li.apply-nav').addClass('active')


$(document).ready(ready)
$(document).on('page:load',ready)
  

reload_masonry = ->
  $container = $(".box_wrapper")
  $container.imagesLoaded ->
    $container.masonry itemSelector: ".box_item"
    return

  return

$ ->
  $gif = '<%= asset_url('ajax-loader.gif') %>'
  window.setTimeout(reload_masonry, 100);
 
  if $('#with-button').size() > 0
    loading_posts = false
 
    $('#load-more-btn').show().click ->
      unless loading_posts
        loading_posts = true
        more_posts_url = $('.pagination .next_page a').attr('href')
        $this = $(this)
        $this.html('<img src="' + $gif + '" alt="Loading..." title="Loading..." />').addClass('disabled')
        $.getScript more_posts_url, ->
          $this.text('More posts').removeClass('disabled') if $this
          loading_posts = false
      return